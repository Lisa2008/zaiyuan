/**
Given a 2d grid map of '1's (land) and '0's (water), count the number of islands. An island is surrounded by water and is formed by connecting adjacent lands horizontally or vertically. You may assume all four edges of the grid are all surrounded by water.

Example 1:

Input:
11110
11010
11000
00000

Output: 1
Example 2:

Input:
11000
11000
00100
00011

Output: 3
**/

/**
 * @param {character[][]} grid
 * @return {number}
 */
var numIslands = function(grid) {
    if(grid === null || grid === []) return 0;
  let index = 0;
  let ism = [];
  
  for(let i = 0; i < grid.length; i++){
    ism[i] = [];
    for(let j = 0; j < grid[i].length; j++){
      //console.log(i + " " + j + " " +index);
      if(+grid[i][j] === 0){
        ism[i][j] = 0;
        continue;
      }
      
      if((j -1) >= 0 && +grid[i][j-1] === 1) {
        ism[i][j] = ism[i][j-1];
      }
      
      if((i -1) >= 0 && +grid[i-1][j] === 1) {
        if(typeof ism[i][j] === 'undefined'){
          ism[i][j] = ism[i-1][j];
        }else{
          if(ism[i][j] > ism[i-1][j]){
            reverseIndex(ism, i ,j,ism[i][j], ism[i-1][j]);
          }
          else if(ism[i][j] < ism[i-1][j]){
            reverseIndex(ism, i ,j,ism[i-1][j], ism[i][j]);
          }
        }
      }
        
      if(typeof ism[i][j] === 'undefined'){
        ism[i][j] = ++index;
      }
    }
  }
  
  let count = 0;
  let current = 0;
  for(let i = 0; i < grid.length; i++){
    for(let j = 0; j < grid[i].length; j++){
      if(ism[i][j] > current){
        count ++;
        current = ism[i][j];
      }
    }
  }
  
  return count;
};

function reverseIndex(isms, x , y,oldnum, newnum){
  for(let i = 0; i <= x - 1; i++){
    for(let j = 0; j < isms[i].length; j++){
      if(isms[i][j] === oldnum) {
        isms[i][j] = newnum;
      }
    }
  }
  
  for(let i = 0; i <= y; i++){
    if(isms[x][i] === oldnum) isms[x][i] = newnum;
  }
}

let g1 = [[1,1,1,1,0],
          [1,1,0,1,0],
          [1,1,0,0,0],
          [0,0,0,0,0]];

let g2 = [[1,1,0,0,0],
          [1,1,0,0,0],
          [0,0,1,0,0],
          [0,0,0,1,1]];

let g3 = [[1,1,1],
          [0,1,0],
          [1,1,1]];

let g4 = [["1","1","1","1","1","0","1","1","1","1","1","1","1","1","1","0","1","0","1","1"],
          ["0","1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","1","0"],
          ["1","0","1","1","1","0","0","1","1","0","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","0","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","0","0","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","0","1","1","1","1","1","1","0","1","1","1","0","1","1","1","0","1","1","1"],["0","1","1","1","1","1","1","1","1","1","1","1","0","1","1","0","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","0","1","1"],["1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["0","1","1","1","1","1","1","1","0","1","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","0","1","1","1","1","1","1","1","0","1","1","1","1","1","1"],["1","0","1","1","1","1","1","0","1","1","1","0","1","1","1","1","0","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","1","1","0"],["1","1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","0","0"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"]];

let g40 = [["1","1","1","1","1","0","1","1","1","1","1","1","1","1","1","0","1","0","1","1"],
          ["0","1","1","1","1","1","1","1","1","1","1","1","1","0","1","1","1","1","1","0"],
          ["1","0","1","1","1","0","0","1","1","0","1","1","1","1","1","1","1","1","1","1"]];

let g5 = [["0","1","1","1","1","0","0","1","0","1","1","1","1","1","1","0","0","1","1","0"],
          ["0","0","0","0","0","0","1","0","1","0","1","0","0","1","1","0","0","0","1","0"],
          ["0","1","0","1","0","1","0","1","0","0","1","1","1","0","0","0","0","0","0","1"],
          ["1","0","0","1","1","1","1","1","0","1","0","0","0","0","1","0","1","0","1","0"],
          ["0","1","0","0","0","0","1","0","0","0","0","1","0","0","1","0","1","1","1","0"],
          ["0","0","0","0","0","0","0","1","0","1","1","0","0","1","1","0","0","1","0","1"],
          ["0","0","1","1","1","1","0","1","1","1","1","0","0","0","1","0","1","0","1","1"],
          ["1","1","1","1","0","0","1","0","1","0","0","0","0","0","0","1","1","1","0","1"],
          ["1","0","0","0","1","1","0","0","1","0","1","1","0","0","0","1","0","0","0","0"],
          ["1","0","0","1","0","1","0","1","0","0","1","1","1","0","0","0","0","0","1","0"],
          ["0","0","0","1","0","0","1","0","0","0","0","0","0","1","0","1","0","0","1","1"],
          ["0","1","0","0","1","1","1","0","1","1","1","0","0","0","1","0","1","0","0","0"],
          ["1","1","1","0","1","1","0","1","0","1","0","1","1","0","0","0","1","0","0","0"],
          ["0","1","1","0","1","0","0","1","1","0","1","1","0","1","1","0","1","1","0","0"],
          ["0","1","1","0","0","1","0","0","0","1","0","1","0","0","0","0","0","0","1","1"],
          ["0","0","1","0","0","0","1","1","0","1","1","1","1","0","1","0","1","0","1","0"],
          ["1","0","0","0","1","0","1","0","1","0","0","0","0","1","1","0","0","0","0","0"],
          ["1","0","0","1","1","0","0","1","1","0","0","0","1","0","0","0","1","1","1","0"],
          ["0","1","0","1","1","0","0","0","1","1","0","0","1","1","1","0","0","1","1","0"],
          ["0","0","1","0","1","0","0","0","0","0","0","0","0","1","0","1","0","0","1","0"]];


       /* [[ 0, 1, 1, 1, 1, 0, 0, 2, 0, 3, 3, 3, 3, 3, 3, 0, 0, 4, 4, 0],
         [ 0, 0, 0, 0, 0, 0, 5, 0, 6, 0, 3, 0, 0, 3, 3, 0, 0, 0, 4, 0],
         [ 0, 7, 0, 8, 0, 8, 0, 8, 0, 0, 3, 3, 3, 0, 0, 0, 0, 0, 0, 11],
         [12, 0, 0, 8, 8, 8, 8, 8, 0,11, 0, 0, 0, 0,12, 0, 13, 0, 13, 0],
         [ 0, 15,0, 0, 0, 0, 8, 0, 0, 0, 0, 16, 0, 0,12, 0, 13, 13, 13, 0],
         [ 0, 0, 0, 0, 0, 0, 0,16, 0, 16, 16, 0,  0, 12, 12, 0,  0, 13, 0, 18],
         [ 0,  0, 18, 18, 18, 18, 0,16, 16, 16, 16,  0,  0, 0,12,  0, 18,  0, 18, 18],
         [18, 18, 18, 18, 0,  0, 19, 0, 16,  0,  0, 0,  0,  0, 0, 18, 18, 18, 0, 18],
         [18,  0, 0,  0, 20, 20, 0, 0, 16, 0, 21, 21,  0, 0, 0, 18, 0,  0,  0,  0],
         [18, 0, 0, 22,  0, 20, 0,23, 0, 0, 21, 21, 21, 0, 0, 0, 0,  0, 24, 0],
         [ 0,  0, 0, 22,  0,  0, 25, 0,  0, 0,  0,  0,  0, 26, 0, 27, 0,  0, 24, 24],
         [ 0, 28,  0,  0, 25, 25, 25,0, 29, 29, 29,  0,  0,  0,30,  0, 31,  0,  0,  0],
         [28, 28, 28, 0, 25, 25, 0,32,  0, 29, 0, 33, 33, 0, 0,  0, 31, 0,  0,  0],
         [ 0, 28, 28,  0, 25, 0,  0,32, 32,  0, 33, 33, 0, 34,34,  0, 31, 31,  0, 0],
         [ 0, 28, 28, 0,  0, 35, 0, 0,  0, 36, 0, 33,  0, 0, 0,  0,  0, 0, 37, 37],
         [ 0, 0, 28,  0,  0,  0, 38,38, 0, 33, 33, 33, 33,  0,38, 0, 39,  0, 37,  0],
         [40,  0, 0, 0, 41, 0, 38, 0, 42, 0, 0,  0, 0, 38, 38,  0, 0, 0,  0, 0],
         [40,  0,  0, 41, 41,  0, 0,42, 42,  0,  0,  0, 43, 0, 0,  0, 44, 44, 44,  0],
         [0, 45,  0, 41, 41,  0,  0, 0, 42, 42,  0,  0, 43, 43,43,  0,  0, 44, 44,  0],
         [0,  0, 46, 0, 41, 0,  0, 0,  0,  0, 0,  0, 0, 43, 0, 47,  0, 0, 44, 0]];*/


//console.log(numIslands(g1)); //1
//console.log(numIslands(g2)); // 3
//console.log(numIslands(g3)); // 1
//console.log(numIslands(g4)); //1
//console.log(numIslands(g40)); //1
console.log(numIslands(g5)); //48
